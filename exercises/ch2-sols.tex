\input{preamble}

\titlespacing{\subsubsection}{0pt}{\parskip}{-\parskip}
\titlespacing{\section}{0pt}{*4}{*1.5}

\begin{document}

\subsubsection*{Exercise 2.2.6}
Suppose we are given a relation $R$ on a set $S$. Define the relation $R'$ as follows 
\[
    R' = R \cup \set{(s, s)}{s \in S}
\]
Show that R' is the reflexive closure of $R$.
\begin{proof}
    By construction, $R'$ is reflexive, so all we need to show is that $R'$ is the smallest reflexive
    relation containing $R$.  Suppose that $T$ was another reflexive relation such that $R \subseteq T$.
    We will show that $R' \subseteq T$.  Let $z = (x, y) \in R'$.  By the defintion of $R'$ it suffices to  consider two cases:
    \begin{description}
        \item[Case 1: $z \in R$] Then clearly, $z \in T$ since $R \subseteq T$.
        \item[Case 2: $z \notin R$] Then, $z = (s, s)$ for some $s \in S$.  Because $T$ is reflexive, $z = (s, s) \in T$.  
    \end{description}

    In either case we have show $z \in T$, hence $R' \subseteq T$. So, $R'$ is the smallest reflexive relation containing $R$ i.e. is it the transitive closure.
\end{proof}

\subsubsection*{Exercise 2.2.7}
A more constructive definition of transitive closure is
\begin{align*}
    R_0 &= R  \\
    R_{i+1} &= R_i \cup \set{(s, u)}{\text{for some $t$, $(s, t) \in R_i$ and $(t, u) \in R_i$}} \\
    R^+ &= \bigcup_i R_i
\end{align*}
Show that $R^+$ is the transitive closure of $R$.
\begin{proof}
First, we show that $R^+$ is transitive.  Suppose that $t \in S$ is such that $(s, t) \in R^+$ and $(t, u) \in R^+$ for some $s, u \in S$.  By the definition of $R^+$ and the fact that the $R_i$'s form an increasing sequence, there is a $k \in \nn$ such that $(s, t) \in R_k$ and $(t, u) \in R_k$.  It follows that $(s, u) \in R_{k+1} \subseteq R^+$ which proves that $R^+$ is transitive.

Next, we show that $R^+$ is the smallest transitive relation containing $R$.  Suppose that $T$ was another
transitive relation containing $R$.  We show by induction that $R_i \subseteq T$ for each $i \in \nn$ so that $R^+ = \bigcup_i R_i \subseteq T$.  
\begin{description}
    \item[Base case:] $R_0 = R \subseteq T$ by assumption.
    \item[Inductive step:] Assume that we have shown $R_i \subseteq T$.  We show that $R_{i+1} \subseteq T$.  Let $z = (s, u) \in R_{i+1}$.  By the definition of $R_{i+1}$, either $z \in R_i$ or there is a 
$t \in S$ such that $(s, t) \in R_i$ and $(t, u) \in R_i$.  In the former case, $z \in T$ by the IH.  In the later case,
$(s, t) \in T$ and $(t, u) \in T$ by the IH.  Because $T$ is transitive, it follows that $z = (s, u) \in T$.  Hence, $R_{i+1} \subseteq T$.
\end{description}
By induction, $R_i \subseteq T$ and it follows that $R^+ \subseteq T$ which proves $R^+$ is the transitive closure.
\end{proof}


\subsubsection*{Exercise 2.2.8}
Suppose $R$ is a binary relation on a set $S$ and $P$ is a predicate on $S$ that is preserved by $R$.  Show that $P$ is also preserved by $R*$.
\begin{proof}
Note that $R^*$, the reflexive and transitive closure of $R$ can be obtained as $R^* = (R')$.  Hence, $R^*$ can be formed as 
\begin{align*}
    R_0 &= R'    \\
    R_{i+1} &= R_i \cup \set{(s, u)}{\text{for some $t$, $(s, t) \in R_i$ and $(t, u) \in R_i$}} \\
    R^* &= \bigcup_i R_i
\end{align*}
We will show that $P$ is preserved by $R_i$ for all $i \in bN$ by induction.
\begin{description}
    \item[Base case:] Let $z = (s, u) \in R_0 = R'$ and suppose that $P(s)$ holds.  Then, either $z \in R$ or $u = s$.  If $z \in R$ then $P(u)$ holds because $R$ preserved $P$.
If $u = s$, then $P(u)$ holds vacuously.
\item[Inductive step:] Assume that $P$ is preserved by $R_i$.  We will show that $R_{i+1}$ 
    preserves $P$. Let $z = (s, u) \in R_{i+1}$ and suppose that $P(s)$ holds.  By the definition of 
    $R_{i+1}$ either $z \in R_i$ or there is a $t \in S$ such that $(s, t) \in R_i$ and $(t, u) \in R_i$.
    In the former case, $P(u)$ holds by the IH.  In the latter case, because $R_i$ preserves $P$ and $P(s)$ holds we first have $P(t)$ holds which implies that $P(u)$ holds.  Hence, $P$ is preserved by $R_{i+1}$.
\end{description}
By induction, $P$ is preserved by $R_i$ for all $i \in \nn$.  Because $R^* = \bigcup_i R_i$ it follows that
$P$ is preserved by $R^*$.
\end{proof}
















\end{document}
